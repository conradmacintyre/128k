function Contextr(e){return void 0===e.Strength?Superstars[e]:e}function Stat(e,t){return e=Contextr(e),e[t]}function Overall(e,t){var r=0;return void 0===t?(r+=Stat(e,"Strength"),r+=Stat(e,"Technique"),r+=Stat(e,"Speed"),r+=Stat(e,"Mind"),r+=Stat(e,"Nerve"),r+=Stat(e,"Heart"),r+=Stat(e,"Charisma"),r+=Stat(e,"Popularity"),r+=Stat(e,"Durability"),r+=Stat(e,"Finisher")):(r+=Stat(e,"Strength")*Matchtypes[t].Strength,r+=Stat(e,"Technique")*Matchtypes[t].Technique,r+=Stat(e,"Speed")*Matchtypes[t].Speed,r+=Stat(e,"Mind")*Matchtypes[t].Mind,r+=Stat(e,"Nerve")*Matchtypes[t].Nerve,r+=Stat(e,"Heart")*Matchtypes[t].Heart,r+=Stat(e,"Charisma")*Matchtypes[t].Charisma,r+=Stat(e,"Popularity")*Matchtypes[t].Popularity,r+=Stat(e,"Durability")*Matchtypes[t].Durability,r+=Stat(e,"Finisher")*Matchtypes[t].Finisher),r}function CheckInjury(e,t){function r(t){return Math.random()>t?(e.Injury=!0,"disabled"):void 0}e=Contextr(e),void 0!==t&&(e.Fatigue+=Matchtypes[t].Fatigue);var a=e.Fatigue;a>10?e.Injury=!0:r(10===a?.8:a>=9?.85:a>=8?.9:.95)}function Comma(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function VictoryType(e){for(var t=10*Math.random(),r=Matchtypes[e].Outcomes,a=r.length,i=0;a>i;i++)if(t>=r[i][0])return console.log(r[i][1]),r[i][1]}function RealViewers(e){return e=parseInt(1e3*e),e>=1e3?e:1e3}function SuperstarSelector(e){var t=document.getElementById("Roster");t.innerHTML="";var r=[];for(var a in e)r.push(a);for(a=0;a<r.length;a++){var i=r[a],n=Contextr(i),s="";n.Injury===!0&&(s="disabled"),t.innerHTML+='<input type="checkbox" id="'+i+'" '+s+'><label class="Wrestler" style="background-image:url(img/'+i+'.png)" for="'+i+'"><div class="DarkBG"><p class="Name">'+n.Name+'</p><p class="Overall"><b>O</b><br>'+parseInt(Overall(i))+'</p><p class="Morale"><b>M</b><br>'+n.Morale+'</p><p class="Fatigue"><b>F</b><br>'+n.Fatigue+'</p><p class="Wins"><b>W</b><br>'+n.Wins+'</p><p class="Losses"><b>L</b><br>'+n.Losses+"</p></div></label>"}}function StartFight(e,t){if(console.log("FIGHT STARTED"),1===e.length)document.getElementById("WinnerName").innerHTML="<p>"+Stat(e[0],"Name")+" won by default. "+Comma(RealViewers())+" people were disappointed.</p>"+document.getElementById("WinnerName").innerHTML;else{var r=[],a=Matchtypes[t].Viewership;console.log("Viewers",a);for(var i=0;i<e.length;i++){var n=Contextr(e[i]),s=Overall(n,t),o=25*Math.random(),l=n.Morale,u=n.Fatigue,c=s+o+l-u;r.push(c),a+=10*n.Popularity}var h=r.indexOf(Math.max.apply(Math,r)),p=Contextr([e[h]]),d=r.indexOf(Math.min.apply(Math,r)),m=Contextr([e[d]]);a-=10*(r[h]-r[d]);for(var g in Superstars){var S=Contextr(g);e.indexOf(g)>-1?(S.Morale<=9.5&&(S.Morale+=.25),CheckInjury(g,t)):(S.Morale>=.25&&(S.Morale-=.25),S.Fatigue>=.25&&(S.Fatigue-=.25),S.Injury===!0&&S.Fatigue<=5&&(S.Injury=!1))}p.Wins+=1,p.Morale<=8.5&&(p.Morale+=1),p.Fatigue>=.25&&(p.Fatigue-=.25),m.Losses+=1,m.Morale>=.5&&(m.Morale-=.5),m.Fatigue<=9.5&&(m.Fatigue+=.5),document.getElementById("WinnerName").innerHTML="<p>"+p.Name+" def. "+m.Name+" via "+VictoryType(t)+", with "+Comma(RealViewers(a))+" viewers.</p>"+document.getElementById("WinnerName").innerHTML}SuperstarSelector(Superstars)}var Superstars,Matchtypes={STD:{Name:"Standard",Strength:1,Technique:1,Speed:1,Mind:1,Nerve:1,Heart:1,MicSkill:0,Charisma:1,Popularity:1,Durability:1,Finisher:2,Height:.1,Weight:.01,Fatigue:.5,Viewership:100,Outcomes:[[9.5,"Disqualification"],[8.5,"Knockout"],[7.5,"Submission"],[0,"Pinfall"]]},SUB:{Name:"Submission",Strength:1,Technique:2,Speed:1,Mind:1.5,Nerve:1,Heart:1,MicSkill:0,Charisma:1,Popularity:1,Durability:1,Finisher:1.5,Height:.1,Weight:.01,Fatigue:1,Viewership:150,Outcomes:[[9.5,"Pass-Out"],[0,"Submission"]]},HCR:{Name:"Hardcore",Strength:1,Technique:1,Speed:1,Mind:1,Nerve:2,Heart:1.5,MicSkill:0,Charisma:1,Popularity:1,Durability:2,Finisher:1,Height:.1,Weight:.01,Fatigue:3,Viewership:200,Outcomes:[[9.5,"Submission"],[8.5,"Knockout"],[0,"Pinfall"]]},LDR:{Name:"Ladder",Strength:1,Technique:1,Speed:2,Mind:1,Nerve:2,Heart:1,MicSkill:0,Charisma:1,Popularity:1,Durability:1.5,Finisher:1,Height:.1,Weight:.01,Fatigue:1.5,Viewership:300,Outcomes:[[0,"Retrieving the suspended object"]]},CGE:{Name:"Cage",Strength:1,Technique:1,Speed:1.2,Mind:1,Nerve:1.5,Heart:2,MicSkill:0,Charisma:1,Popularity:1,Durability:1.5,Finisher:1,Height:.1,Weight:.01,Fatigue:2,Viewership:250,Outcomes:[[9,"Submission"],[8,"Pinfall"],[0,"Climb-Out"]]}},ShowRoster=document.getElementById("RosterButton"),RosterWrap=document.getElementById("RosterWrapper");ShowRoster.addEventListener("click",function(){var e="open";RosterWrap.classList.contains(e)&&ShowRoster.classList.contains(e)?(ShowRoster.classList.remove(e),RosterWrap.classList.remove(e),RosterWrap.removeAttribute("style")):(ShowRoster.classList.add(e),RosterWrap.classList.add(e),RosterWrap.setAttribute("style","height:"+RosterWrap.children[0].offsetHeight+"px;"))}),document.getElementById("Rematch").addEventListener("click",function(){for(var e=this.getAttribute("data-rematch").split(","),t=0;t<e.length;t++){var r=e[t];console.log(r,e),document.getElementById(r).click()}}),document.getElementById("AllIn").addEventListener("click",function(){for(var e=document.querySelectorAll("input:not(:disabled)"),t=0;t<e.length;t++)e[t].checked=!0}),document.getElementById("Fight").addEventListener("click",function(){for(var e=document.querySelectorAll("input:checked"),t=[],r=document.getElementById("MatchType").value,a=0;a<e.length;a++)t.push(e[a].getAttribute("id"));document.getElementById("Rematch").setAttribute("data-rematch",t),StartFight(t,r)}),function e(){SuperstarSelector(Superstars),ShowRoster.click()}();